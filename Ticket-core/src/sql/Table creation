CREATE TABLE users
(
id INT PRIMARY KEY AUTO_INCREMENT,
NAME VARCHAR(40) NOT NULL,
email_id VARCHAR(30) UNIQUE NOT NULL,
PASSWORD VARCHAR(40) NOT NULL,
active BOOLEAN DEFAULT TRUE NOT NULL
)

CREATE TABLE departments
(
id INT PRIMARY KEY AUTO_INCREMENT,
NAME VARCHAR(30) UNIQUE NOT NULL,
active BOOLEAN DEFAULT TRUE NOT NULL
)
CREATE TABLE roles
(
id INT PRIMARY KEY AUTO_INCREMENT,
NAME VARCHAR(30) UNIQUE NOT NULL,
active BOOLEAN DEFAULT TRUE NOT NULL
)

CREATE TABLE employees
(
id INT PRIMARY KEY AUTO_INCREMENT,
department_id INT NOT NULL,
role_id INT NOT NULL,
NAME VARCHAR(40) NOT NULL,
email_id VARCHAR(30) UNIQUE NOT NULL,
PASSWORD VARCHAR(40) NOT NULL,
active BOOLEAN DEFAULT TRUE NOT NULL,
CONSTRAINT fk_department_id FOREIGN KEY(department_id) REFERENCES departments(id),
CONSTRAINT fk_role_id FOREIGN KEY(role_id) REFERENCES roles(id)
)

CREATE TABLE ticket_transactions
(
id INT PRIMARY KEY AUTO_INCREMENT,
user_id INT NOT NULL,
SUBJECT VARCHAR(40) NOT NULL,
description TEXT NOT NULL,
created_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
department_id INT,
assigned_employee_id INT,
resolved_date TIMESTAMP,
STATUS VARCHAR(30) DEFAULT 'open',
CONSTRAINT fk_user_id FOREIGN KEY (user_id) REFERENCES users(id),
CONSTRAINT fk1_department_id FOREIGN KEY(department_id) REFERENCES departments(id),
CONSTRAINT fk_assigned_employee_id FOREIGN KEY(assigned_employee_id) REFERENCES employees(id)
)


CREATE TABLE issue_solutions
(
id INT PRIMARY KEY AUTO_INCREMENT,
ticket_id INT NOT NULL,
solution TEXT NOT NULL,
CONSTRAINT fk_ticket_id FOREIGN KEY(ticket_id) REFERENCES ticket_transactions(id)
)

